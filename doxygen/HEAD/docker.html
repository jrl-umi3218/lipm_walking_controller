<!-- Modified version of HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>lipm_walking_controller: Using the Docker image</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('docker.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Using the Docker image </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The easiest way to get started with the controller is to run its Docker image from an Ubuntu Linux distribution.</p>
<p>The Docker image has been tested on Ubuntu LTS releases from 14.04 to 18.04. It is unsupported on macOS or Windows as GUI compatibility (for Choreonoid and RViz) is an issue on these systems.</p>
<h1><a class="anchor" id="docker_run"></a>
Running all at once</h1>
<p>Depending on your Ubuntu release you might need to give Docker permissions to connect to X11:</p>
<div class="fragment"><div class="line">xhost +local:docker</div></div><!-- fragment --><p>Pull and run the Docker image by running:</p>
<div class="fragment"><div class="line">docker run -it --rm --user ayumi -e DISPLAY=${DISPLAY} -v /tmp/.X11-unix:/tmp/.X11-unix:rw stephanecaron/lipm_walking_controller <a class="code" href="namespacelipm__walking.html">lipm_walking</a> --floor</div></div><!-- fragment --><p>Replace <code>lipm_walking --floor</code>  by <code>bash</code> to open a shell in the container. You can also make an alias for faster later access:</p>
<div class="fragment"><div class="line">host:~$ docker run -it --rm --user ayumi -e DISPLAY=${DISPLAY} -v /tmp/.X11-unix:/tmp/.X11-unix:rw stephanecaron/lipm_walking_controller bash</div><div class="line">ayumi:/$ <a class="code" href="namespacelipm__walking.html">lipm_walking</a> --staircase</div><div class="line">ayumi:/$ mc_log_ui /tmp/mc-control-LIPMWalking-latest.bin</div></div><!-- fragment --><p>You should get something like this:</p>
<div class="image">
<img src="https://user-images.githubusercontent.com/1189580/69481155-04de3500-0e52-11ea-91cc-02d05d504ffa.png" style="max-height: 42em" align="left"/>
</div>
 <div style="clear: both"></div><p>Use the controller via its <a href="https://github.com/stephane-caron/lipm_walking_controller/wiki/Graphical-user-interface">RViz panel</a>. When you are done, type Control-C in the terminal to close both windows.</p>
<p>See the <a class="el" href="troubleshooting.html#docker_questions">Docker troubleshooting</a> section if you encounter any problem.</p>
<h1><a class="anchor" id="docker_separate"></a>
Running processes separately</h1>
<p>The <code>lipm_walking</code>  script starts Choreonoid and RViz in parallel, but you might want to run them separately, for instance keeping RViz open while restarting the controller once in a while. In this case, run the image in detached mode as follows:</p>
<div class="fragment"><div class="line">CONTAINER=$(docker run -it -d --user ayumi -e DISPLAY=${DISPLAY} -v /tmp/.X11-unix:/tmp/.X11-unix:rw stephanecaron/lipm_walking_controller bash)</div></div><!-- fragment --><p>You can now open shells in the running container via <code>docker exec -it ${CONTAINER} bash</code>, where <code>${CONTAINER}</code> is the shell variable that holds the container identifier.</p>
<p>Open RViz as follows:</p>
<div class="fragment"><div class="line">host:~$ docker exec -it ${CONTAINER} bash</div><div class="line">ayumi:~$ roslaunch lipm_walking_controller display.launch robot:=jvrc1</div></div><!-- fragment --><p>Open Choreonoid as follows:</p>
<div class="fragment"><div class="line">host:~$ docker exec -it ${CONTAINER} bash</div><div class="line">ayumi:~$ sudo reset-omninames</div><div class="line">ayumi:~$ cd /usr/local/share/hrpsys/samples/JVRC1</div><div class="line">ayumi:/usr/local/share/hrpsys/samples/JVRC1$ choreonoid --start-simulation sim_mc.cnoid</div></div><!-- fragment --><p>Drop the <code>--start-simulation</code> argument above if you prefer to start the simulation by clicking on the GUI button. Check out the other Choreonoid projects in the <code>JVRC1</code> directory for the stair climbing scenario. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Dec 16 2019 02:42:56 for lipm_walking_controller by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
